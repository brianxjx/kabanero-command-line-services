FROM open-liberty:webProfile7-java8-openj9
COPY --chown=1001:0 /target/KabCollections-1.0-SNAPSHOT.war /config/dropins
COPY --chown=1001:0 /target/cacerts /config/resources/security/cacerts
COPY --chown=1001:0 /target/liberty/wlp/usr/servers/defaultServer/server.xml /config
COPY --chown=1001:0 /target/keystore.xml /config/configDropins/defaults
RUN mkdir -p /opt/ol/wlp/output/defaultServer/resources/security
RUN chown -R 1001:0 /opt/ol/wlp/output/defaultServer/resources/security
RUN chmod -R g+rw /opt/ol/wlp/output/defaultServer/resources/security
COPY /target/cacerts /opt/ol/wlp/output/defaultServer/resources/security/cacerts
COPY /target/liberty/wlp/usr/servers/defaultServer/server.xml /opt/ol/wlp/output/defaultServer/server.xml

